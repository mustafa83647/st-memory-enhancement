<div class="memory_enhancement_container" dir="rtl" style="text-align: right;">
    <div class="memory_enhancement_settings">
        <div class="inline-drawer">
            <div id="inline_drawer_header_content">
                <b style="font-size: 1.1rem" data-i18n="Memory Enhancement (Tables)">ุงูุฐุงูุฑุฉ ุงููุนุฒุฒุฉ (ุงูุฌุฏุงูู)</b>
                <span id="tableUpdateTag" style="cursor: pointer; background-color: #41b68188"
                    data-i18n="Click to update">ุงุถุบุท ููุชุญุฏูุซ</span>
            </div>

            <div class="inline-drawer-content">
                <div id="memory_enhancement_settings_inline_drawer_content">
                    <div style=" display: flex; flex-direction: row; justify-content: space-between; ">
                        <div style=" display: flex; flex-direction: row; gap: 10px;">
                            <div class="menu_button_icon menu_button interactable">
                                <i class="fa-brands fa-github fa-lg"></i>
                                <a href="https://github.com/muyoou/st-memory-enhancement/"
                                    data-i18n="Project link">ุฑุงุจุท ุงููุดุฑูุน</a>
                            </div>
                            <div class="menu_button_icon menu_button interactable">
                                <i class="fa-solid fa-book"></i>
                                <a href="https://muyoo.com.cn/wiki/memory/start.html" data-i18n="Read tutorial">ูุฑุงุกุฉ ุงูุดุฑุญ</a>
                            </div>
                            <div class="menu_button_icon menu_button interactable">
                                <i class="fa-solid fa-list"></i>
                                <a href="https://github.com/muyoou/st-memory-enhancement/releases"
                                    data-i18n="Changelog">ุณุฌู ุงูุชุญุฏูุซุงุช</a>
                            </div>
                        </div>
                        <div class="menu_button_icon menu_button interactable" id="table_debug_log_button">
                            <i class="fa-solid fa-bug"></i>
                            <a data-i18n="Logs">ุงูุณุฌูุงุช</a>
                        </div>
                    </div>
                    <div id="table_message_tip"></div>

                    <div class="persona_management_left_column flex-container wide100p flexGap10"
                        style="padding: 10px 0; gap: 10px">
                        <div class="flex1 wide50p" style="min-width: 300px">
                            <h4 class="standoutHeader" data-i18n="Plugin settings">ุฅุนุฏุงุฏุงุช ุงูุฅุถุงูุฉ</h4>

                            <div>
                                <h4 class="standoutHeader flex-container wide100p"
                                    style="justify-content: space-between; align-items: center">
                                    <div data-i18n="Import, export and reset plugin">ุงูุงุณุชูุฑุงุฏ ูุงูุชุตุฏูุฑ ูุฅุนุงุฏุฉ ุงูุถุจุท</div>
                                    <div class="flex-container">
                                        <div class="menu_button button-square-icon fa-solid fa-file-import"
                                            id="table-set-import" title="ุงุณุชูุฑุงุฏ ููุงูุจ ุงูุฌุฏุงูู"
                                            data-i18n="[title]Import table presets"></div>
                                        <div class="menu_button button-square-icon fa-solid fa-file-export"
                                            id="table-set-export" title="ุชุตุฏูุฑ ููุงูุจ ุงูุฌุฏุงูู"
                                            data-i18n="[title]Export table presets"></div>
                                        <div class="menu_button button-square-icon fa-solid fa-undo" id="table-reset"
                                            title="ุฅุนุงุฏุฉ ุถุจุท ุงูุฅุถุงูุฉ" data-i18n="[title]Reset table presets"></div>
                                    </div>
                            </div>

                            <h4 data-i18n="Plugin switches">ููุงุชูุญ ุงูุชุดุบูู</h4>
                            <div class="checkbox_label range-block" style="justify-content: flex-start;">
                                <input type="checkbox" id="table_switch"><span data-i18n="Enable plugin">ุชูุนูู ุงูุฅุถุงูุฉ</span>
                            </div>
                            <div class="checkbox_label range-block" style="justify-content: flex-start;">
                                <input type="checkbox" id="table_switch_debug_mode"><span
                                    data-i18n="Debug mode">ูุถุน ุงููุทูุฑูู</span>
                                <small class="toggle-description" style="justify-content: flex-start;"
                                    data-i18n="Debug mode description">(ูุณุชุฎุฏู ูุงุฎุชุจุงุฑ ุงูุฃููุงุฏ ููุทุ ูุณุจุจ ุจุทุก ูู ุงูุฃุฏุงุก)</small>
                            </div>

                            <h4 data-i18n="Message template">ูุงูุจ ุงูุฑุณุงูุฉ</h4>
                            <div style="padding-right: 5px;">
                                <label for="dataTable_message_template"></label>
                                <small class="toggle-description" style="justify-content: flex-start;"
                                    data-i18n="Message template description">(ููุณุชุฎุฏู ูุชุนููู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููููุฉ ุงุณุชุฎุฏุงู ูุชุนุฏูู ุงูุฌุฏุงููุ ุงุณุชุฎุฏู ุงูุฃูุฑ <code>{{tableData}}</code> ูุชุญุฏูุฏ ููุงู ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช)</small>
                                <textarea id="dataTable_message_template" class="wide100p" rows="8" style="text-align: left; direction: ltr;"></textarea>
                            </div>
                            <div style="padding-right: 5px;">
                                <div style="display: flex; align-items: center;">
                                    <label for="dataTable_injection_mode" style="min-width: 50px"
                                        data-i18n="Injection">ุงูุญูู:</label>
                                    <select id="dataTable_injection_mode" style="margin-right: 5px;">
                                        <option value="injection_off" data-i18n="Turn off injection">ุฅููุงู ุงูุญูู</option>
                                        <option value="deep_system">@D โ</option>
                                        <option value="deep_user">@D ๐ค</option>
                                        <option value="deep_assistant">@D ๐ค</option>
                                    </select>
                                    <label for="dataTable_deep" style="min-width: 60px; padding-right: 10px;"
                                        data-i18n="Depth">ุงูุนูู:</label>
                                    <input id="dataTable_deep" class="text_pole" type="number" style="margin-right: 5px;">
                                </div>
                            </div>
                        </div>
                        <div class="flex1 wide50p" style="min-width: 300px">
                            <div>
                                <h4 class="standoutHeader" data-i18n="Run strategy">ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุดุบูู</h4>
                                <label for="fill_table_time" data-i18n="Render to">ุชุญุฏูุซ ุงูุฌุฏูู ูุญุฏุซ:</label>
                                <select id="fill_table_time" class="flex1" style="min-width: 100px">
                                    <option value="chat">ุฃุซูุงุก ุงููุญุงุฏุซุฉ (ุชููุงุฆู)</option>
                                    <option value="after">ุจุนุฏ ุงุณุชูุจุงู ุงูุฑุณุงูุฉ (ุจุดูู ูููุตู)</option>
                                </select>

                                <div id="reply_options" style="padding-right: 20px; width: calc(100% - 20px);">
                                    <div class="checkbox_label range-block" style="justify-content: flex-start;">
                                        <input type="checkbox" id="table_read_switch"><span
                                            data-i18n="AI read table switch">ุงูุณูุงุญ ููุฐูุงุก ุงูุงุตุทูุงุนู ุจูุฑุงุกุฉ ุงูุฌุฏูู</span>
                                    </div>
                                    <div class="checkbox_label range-block" style="justify-content: flex-start;">
                                        <input type="checkbox" id="table_edit_switch"><span
                                            data-i18n="AI edit table switch">ุงูุณูุงุญ ููุฐูุงุก ุงูุงุตุทูุงุนู ุจุชุนุฏูู ุงูุฌุฏูู</span>
                                    </div>
                                </div>

                                <div id="step_by_step_options" style="padding-right: 20px; width: calc(100% - 20px);">
                                    <div class="checkbox_label" style="display: flex; align-items: center;">
                                        <input type="checkbox" id="step_by_step_use_main_api" checked><span
                                            data-i18n="Use main API">ุงุณุชุฎุฏุงู ุงูู API ุงูุฃุณุงุณู</span>
                                        <div class="menu_button menu_button_icon" id="trigger_step_by_step_button"
                                            style="margin-right: 10px;">
                                            <i class="fa-solid fa-play"></i><a data-i18n="Fill now">ุชุญุฏูุซ ุงูุขู</a>
                                        </div>
                                        <label for="separateReadContextLayers" style="margin-right: 10px;">ุนูู ุงูุณูุงู</label>
                                        <input type="number" id="separateReadContextLayers" class="margin0 text_pole"
                                            style="width: 50px; margin-right: 5px;" min="1" value="1" />
                                        <label for="separateReadLorebook" style="margin-right: 10px;">ูุฑุงุกุฉ ูุชุงุจ ุงูุนุงูู (Lorebook)</label>
                                        <input type="checkbox" id="separateReadLorebook" class="margin0" style="margin-right: 5px;" />
                                        <small class="toggle-description" style="justify-content: flex-start;">(ูุง ููุตุญ ุจู ุฅุฐุง ูุงู ุงูู API ูุญุฏูุฏ)</small>
                                    </div>
                                    <div style="padding-right: 5px; margin-bottom: 10px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <label for="step_by_step_user_prompt"
                                                data-i18n="settings.label.stepByStepUserPrompt">ูููู ุฃูุฑ ุงูุชุญุฏูุซ ุงููุณุชูู</label>
                                            <div class="menu_button button-square-icon fa-solid fa-undo"
                                                id="reset_step_by_step_user_prompt" title="ุฅุนุงุฏุฉ ูููุถุน ุงูุงูุชุฑุงุถู"
                                                data-i18n="[title]Reset to default"></div>
                                        </div>
                                        <small class="toggle-description" style="justify-content: flex-start;"
                                            data-i18n="settings.hint.stepByStepUserPrompt">(ูุฐุง ุงูุฃูุฑ ุณููุฑุณู ุจุดูู ูููุตูุ ูุฑุฌู ุงูุญูุงุธ ุนูู ุงูุชูุณูู ุงูุจุฑูุฌู json)</small>
                                        <textarea id="step_by_step_user_prompt"
                                            class="text_pole settings_textarea wide100p" rows="8"
                                            placeholder="ุฃุฏุฎู ุฃูุฑ ุงูุชุญุฏูุซ ุงููุณุชูู" style="text-align: left; direction: ltr;"></textarea>
                                    </div>
                                    <div class="checkbox_label range-block" style="justify-content: flex-start;">
                                        <input type="checkbox" id="confirm_before_execution" checked><span
                                            data-i18n="Confirm before execution">ุงูุชุฃููุฏ ูุจู ุงูุชูููุฐ</span>
                                        <small class="toggle-description" style="justify-content: flex-start;"
                                            data-i18n="Confirm before execution description">(ุณุชุธูุฑ ูุงูุฐุฉ ุชุฃููุฏ ูุจู ูู ุนูููุฉ ุชุญุฏูุซ ูุณุชููุฉ)</small>
                                    </div>

                                    <div class="inline-drawer wide100p">
                                        <div class="inline-drawer-toggle inline-drawer-header">
                                            <b><span data-i18n="Custom independent API">ุฅุนุฏุงุฏุงุช API ูุณุชูู ูุฎุตุต</span></b>
                                            <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down"></div>
                                        </div>
                                        <div class="inline-drawer-content"
                                            style="display: none; padding-right: 20px; width: calc(100% - 20px)">
                                            <input type="text" id="custom_api_url" class="text_pole"
                                                placeholder="ุฑุงุจุท ืู API (ูุฌุจ ุฃู ููุชูู ุจู /v1)" style="text-align: left; direction: ltr;">
                                            <input type="password" id="custom_api_key" class="text_pole"
                                                placeholder="ููุชุงุญ ุงูู API (ุงูุตู ุจูููุง ุจูุงุตูุฉ ุฅุฐุง ูุงู ููุงู ุฃูุซุฑ ูู ูุงุญุฏ)" style="text-align: left; direction: ltr;">
                                            <input type="text" id="custom_model_name" class="text_pole"
                                                placeholder="ุงุณู ุงูููุฏูู (ูููู ูุชุงุจุชู ุฃู ุณุญุจู ุชููุงุฆูุงู)" style="text-align: left; direction: ltr;">
                                            <div class="range-block" style="justify-content: flex-start;">
                                                <select id="model_selector" class="text_pole">
                                                    <option value="">ุงุณุญุจ ูุงุฆูุฉ ุงูููุฏููุงุช ุฃููุงู</option>
                                                </select>
                                                <div class="menu_button menu_button_icon" id="fetch_models_button">
                                                    <a>ุณุญุจ ุงูููุฏููุงุช</a>
                                                </div>
                                                <div class="menu_button menu_button_icon" id="table_test_api_button"
                                                    style="margin-right: 5px;">
                                                    <a>ุงุฎุชุจุงุฑ ุงูุงุชุตุงู</a>
                                                </div>
                                            </div>
                                            <div class="flex-container slider-container"
                                                style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                                <label
                                                    style="min-width: 140px; margin: 0; white-space: nowrap; flex-shrink: 0;"
                                                    data-i18n="Custom API temperature setting">ุญุฑุงุฑุฉ ุงูู API ุงููุฎุตุต:<span
                                                        id="custom_temperature_value" style="margin-right: 5px;">1.0</span></label>
                                                <input type="range" id="custom_temperature" min="0.1" max="2.0"
                                                    step="0.1" value="1.0" style="flex-grow: 1;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="inline-drawer wide100p">
                                <div class="inline-drawer-toggle inline-drawer-header">
                                    <b><span data-i18n="Reorganize tables">ุชูุฎูุต/ุชุฑุชูุจ ุงูุฌุฏุงูู (ููุณุชุฎุฏู ูุฏููุงู)</span></b>
                                    <div class="fa-solid fa-circle-chevron-down inline-drawer-icon down"></div>
                                </div>
                                <div class="inline-drawer-content" style="display: none; ">
                                    <div class="checkbox_label range-block" style="justify-content: flex-start;">
                                        <input type="checkbox" id="use_main_api" checked><span
                                            data-i18n="Use main API">ุงุณุชุฎุฏุงู ุงูู API ุงูุฃุณุงุณู</span>
                                    </div>

                                    <div class="flex-container slider-container"
                                        style="margin: 5px; padding-bottom: 10px" id="token_limit_container">
                                        <label><span data-i18n="Token limit">ุญุฏ ุงูุชูููุฒ:</span><code
                                                id="rebuild_token_limit_value" style="margin-right: 5px;">10000</code></label>
                                        <input type="range" id="rebuild_token_limit" min="1000" max="100000" step="1000"
                                            value="10000" style="width: calc(100% - 20px);">
                                    </div>
                                    <div class="checkbox_label range-block" style="justify-content: flex-start;">
                                        <input type="checkbox" id="ignore_user_sent" checked><span
                                            data-i18n="Only reference AI replies">ุงูุงุนุชูุงุฏ ุนูู ุฑุณุงุฆู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููุท</span>
                                    </div>
                                    <div class="checkbox_label range-block" style="justify-content: flex-start;">
                                        <input type="checkbox" id="bool_silent_refresh"><span
                                            data-i18n="Skip confirmation dialog after reorganizing">ุชุฎุทู ูุงูุฐุฉ ุงูุชุฃููุฏ ุจุนุฏ ุงูุชูุฎูุต</span>
                                    </div>

                                    <div class="flex-container" style="flex-wrap: nowrap; padding-top: 10px; align-items: center;">
                                        <b style="width: 170px;">ูุงูุจ ุงูุชูุฎูุต:</b>
                                        <select id="rebuild_preset_style" style="flex-grow: 1; max-width: 150px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; margin-right: 5px;"></select>
                                    </div>
                                    <div style="padding-right: 5px;">
                                        <label for="dataTable_rebuild_system_message_template">ุชุนูููุงุช ุงููุธุงู (System Prompt)</label>
                                        <textarea id="dataTable_rebuild_system_message_template" class="wide100p" rows="4" style="text-align: left; direction: ltr;"></textarea>
                                        <label for="dataTable_rebuild_user_message_template">ุชุนูููุงุช ุงููุณุชุฎุฏู (User Prompt)</label>
                                        <textarea id="dataTable_rebuild_user_message_template" class="wide100p" rows="4" style="text-align: left; direction: ltr;"></textarea>
                                        <label for="dataTable_rebuild_additional_prompt">ุชุนูููุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)</label>
                                        <textarea id="dataTable_rebuild_additional_prompt" class="wide100p" rows="2" style="text-align: left; direction: ltr;" placeholder="ูุซุงู: ุฑูุฒ ุนูู ุชูุฎูุต ุงููุนุงุฑู..."></textarea>
                                    </div>

                                    <div class="menu_button interactable" id="rebuild_table_button" style="text-align: center; margin-top: 10px;">
                                        <i class="fa-solid fa-arrows-rotate"></i>
                                        <span data-i18n="Reorganize tables now">ุชุฑุชูุจ ุงูุฌุฏูู ุงูุขู</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
                                            </div>
